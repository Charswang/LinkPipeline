### Dynamic Data Compression Algorithm Selection for Big Data Processing on Local File System

#### 2.3 Design Polices and Challenges

> 一种新颖的有效压缩文件系统有望具有以下特征： (1)。 为了空间效率，应该**使用数据压缩率高的算法**， (2) 对于**一些压缩率低的复杂内部数据，应该使用快速压缩算法**。 (3). 保持与其他压缩方法的兼容性，并保持对分布式文件系统以及上层大数据应用程序的透明性。 因此，我们需要解决以下关键挑战：

> 与现有文件系统集成：实际上，该文件系统应该兼容任何商品服务器，没有强制约束。 集成的直观方式是**使用我们定义的压缩服务修改所有与压缩相关的功能**。 然而，它会增加系统耦合并损害其他新兴数据压缩方案的可扩展性，因为它们必须再次修改源代码，甚至可能需要重新设计整个文件系统。**????** 更重要的是，应该**自动避免低效的数据压缩***，因为它会**浪费系统资源但无法获得任何性能改进**。 我们通过将在第 3.1 节中详细说明的压缩服务引擎来解决这些挑战

<font color="red">避免低效的数据压缩，因为它会浪费系统资源的同时没办法获得一些有效改进；</font>

> 实用的数据压缩方案：另一个关键的设计点是如何用软件实现的方法设计一个实用的数据压缩，它**应该预先考虑不同的工作负载及其数据特性来决定在大数据处理中采用哪种数据压缩算法。** 从根本上说，用动态算法选择代替特定算法执行的固定压缩函数调用是一个嫁接过程。 此外，由于不同的压缩算法具有不同的压缩比和速度，因此**应不同地考虑数据压缩率**【**数据冷热**】。 这些由将在第 3.2 节中描述的动态压缩算法选择模块解决。

<font color="red">应该预先考虑不同的工作负载及其数据特性来决定在大数据处理中采用哪种数据压缩算法。</font>

#### 3 design & implementation

动态算法选择模块

##### 整体架构

![image-20210917232923014](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210917232923014.png)

> 图 1 显示了我们在存储子系统内和 I/O 路径上提出的数据压缩方案的架构概览。 动态算法选择模块是一个改进的Linux ZFS模块，位于本地文件系统，直接访问底层现代存储系统。 在 Linux ZFS 文件系统中，ZIO 模块负责 I/O 请求，其中所有请求必须遵循由处理元素链组成的结构化管道。 数据压缩模块负责压缩传入的写数据和解压传出的读数据。

> 简化的数据压缩工作流程也如图 1 所示。ZIO 模块首先接收来自上层应用程序或存储系统的请求（步骤 1），并将其发送到数据压缩模块（步骤 2）。 数据压缩模块将注册几种压缩算法并将**系统配置信息**传递给动态算法选择模块（步骤 3），该模块将**根据数据的可压缩性**适当地选择算法来压缩或解压缩数据（步骤 4）。 数据处理完成后，数据压缩模块将数据返回给ZIO模块（步骤5），并通过写操作将数据转发到存储系统（步骤6）。 解压操作与压缩操作类似

---

> 动态算法选择模块的设计**高度依赖于工作负载特性，尤其是数据大小和压缩率。** 一个典型的大数据集可能会得到很多大小大、内部数据结构复杂、压缩率不一的数据文件。 它还在数据处理期间生成非常频繁的 I/O 请求。 一方面，更高的压缩算法在压缩和解压过程中需要更高的计算开销，反之亦然。 另一方面，更高的压缩比算法将节省更多的存储空间。 **不同压缩算法之间的压缩比与速度和空间效率之间的权衡是选择大数据处理算法的关键。**

**<font color="red">依赖工作负载特性？？</font>[不同算法的压缩率]**

> 一般对于压缩率高的数据集，可以采用高压缩率的算法进行处理，比如GZIP，以实现高空间效率。 此外，对于GZIP无法获得任何好处的低压缩性数据集，可以通过快速算法进行处理，例如LZ4，以提高处理性能。 通过这种方式，我们可以**针对不同的工作负载特性，同时实现系统性能和空间效率的巨大提升**

> 图 2 显示了动态算法选择模块中的全局决策。 **CR 用压缩率表示，表示数据的可压缩性。T1和T2是表示高压缩性和低压缩性的两个阈值**。根据实证评估和实验经验，大多数情况下T1和T2可以设置为3和1.2。用户可以微调两个阈值以适应他们在一些特殊场景和工作负载下的工作负载。在每次 I/O 请求期间，**动态算法选择会取原始数据块的 10% 执行预压缩或解压缩，以获得数据块的压缩率**。如果部分数据块的压缩率大于T1，则使用GZIP算法对数据块进行处理；否则，在这种情况下，如果压缩比大于T2，则使用LZ4算法处理数据块；否则，它会跳过数据压缩，直接将数据块存储到存储系统中。解压操作是压缩的逆过程，因此与压缩操作有相同的过程。

![image-20210917233955306](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210917233955306.png)

没啥东西；



**先根据要压缩的数据的10%进行压缩看压缩率，然后根据压缩率的阈值，来看是要采用哪种压缩算法；**

**从读写的响应时间和存储空间进行对比**