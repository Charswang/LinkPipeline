## 代码整洁之道 阅读笔记

---

#### 1.3.5 什么是整洁代码

> - 整洁的代码只在做好一件事，每个函数、每个类、每个模块都集中在一件事上；而混乱的代码意图混乱；
> - 不要重复代码
> - 提高表达力
> - 进行小规模抽象

**"愉悦"**：整洁的代码让人读起来轻松愉悦；

**"效率"**：糟糕的代码引发混乱；别人修改糟糕的代码只会越改越烂；

**程序上的"破窗理论"**：糟糕的代码让人觉着无人照管，于是别人也不再关心。他们会放任窗户继续破损，最终自己也参加破坏活动，在糟糕的代码上随意更改；

**"童子军军规"**：让营地比你来的时候更干净；自己的代码要保持整洁，遇到可以随手更改的地方可以随手更正；

## 2、命名问题

#### 2.2 名副其实

> 如果名称需要使用注释来补充，那就不算是名副其实；

#### 2.3 避免误导

- 除非是真的List类型，不然不要在名称中带有List；否则容易引起错误判断；

  > accountList(<font color="red">X</font>)；accountGroup(**√**)/bunchOdAcount(√)/accounts(√)

- 避免使用与已经出现过的名称过于相似的名称；
- 尽量避免O或0单独出现；

#### 2.4 有意义的区分

***避免无意义名称的出现***

> 比如ProductInfo和ProduceData。其实Info和Data的区别并不大，两者表示的意义类似。所以这是不可以分为两个名称比较的。

#### 2.5 使用读的出来的名称

#### 2.6 使用可搜索的名称

- ***长名称胜于短名称***
- ***名称长短要与作用域大小相对应***
- ***常用的变量/常量要使用便于搜索的名称(eg:WORK_DAYS_PER_WEEK)***

#### 2.7 成员前缀

> 有时，并不需要在名称中加上无意义的前缀

对于接口来说，接口名称不需要加上I前缀，这样反而会更难看；

#### 2.8 避免思维映射

名称应该让读者**一眼就理解**，而不是还要读者去翻译来理解它的真实意义

#### 2.9 类名

类名应该是***名词***而不是动词

> 尽量避免使用Manager, Processor, Data, Info这样的类名

#### 2.10 方法名

方法名应该是动词

#### 2.11 正常一点，不要搞一些奇怪的东西

#### 2.12 / 2.13 每个概念对应一个词 / 别用双关语

> 要用就使用一样的，Controller和Manager意义其实是一样的；

#### 2.14 / 2.15 尽量使用计算机科学、算法名、模式名、数学术语等来定义名称，如果实在写不来，就采用所涉问题领域而来的名称。

#### 2.16 添加有意义的语境 / 2.17 不添加没用的语境

> 有一个特定的应用GSD，其中的一个类名中，Address算是个好的类名，但是针对这个特定问题：GSDAccountAddress就显得有些多余。如果当成实体的话，accountAddress倒是个挺好的名称。？？对于firstName，前面加上addr前缀就显得是添加了有意义的语境。



## 3、函数

> 如何让代码易于阅读和理解？如何让函数表达出意图？

#### 3.1 短小

> 函数要尽量短。在实习过程中，要求的是一个函数体的长度不能超过**50**行；

函数中的嵌套方法尽量要不大于两层；

#### 3.2 一个函数只专注于一件事

> 如何让判断函数是否专注于一件事？

***那就要看该函数是否可以再拆出来一个函数；***

#### 3.3 每个函数中的抽象层级应该属于同一级<font color="red">**</font>

```java
// 较高的抽象层级：在函数中出现类似getHtml()这种不会用到它的返回值的函数；
// 中间抽象层级：String name = parser.render(pagePath)这种会用到返回值的函数
// 低级抽象层级：xxx.append();这种普通的字符串操作函数等；
```

#### <font color="red">3.4 对switch语句来说--存疑？</font>

> 写出只做一件事的switch是很难的，因为switch本来就是要做很多事的。在避不开switch的时候，怎样确保每个case保持在同一抽象层级；

可以将调用的函数封装到一个对象中，然后将switch放到对象的工厂下，然后通过创建对象来调用函数？？

#### 3.5 使用描述性的名称

对于函数的名称来说，尽量是描述该函数具体在做什么；

***不要害怕长名称，长而具有描述性的名称，要比短而令人费解的名称好***

eg：includeSetuoAndTeardownPages、includeSetupPages等；

#### 3.6 函数参数

> 实习中，编码规范要求的是一个函数不能超过5个参数；

**- 能不带参数就不带参数**；

---

##### 3.6.1 一个参数的函数

如果没有返回值的话，就代表该函数其实是一个事件。在描述名称的时候，要尽量让读者清楚的了解这是个事件；***尽量避免编写有参数但没有返回值的函数；***

##### 3.6.2 标识函数

***- 不该向函数中传递boolean类型的参数***

##### 3.6.3 两个参数的函数其实理论上是会比一个参数的函数要难理解的

因此，如果有可能，尽量将两个参数的函数转换成一个参数的函数；

##### 3.6.4 三个参数的函数

##### 3.6.5 参数对象

如果函数中需要三个或者三个以上的参数，那么说明其中的一些参数应该被**封装成类了。**

##### 3.6.6 参数列表

##### 3.6.7 动词与关键字

对于一个参数的函数来说，函数名和参数名可以形成动词/名词的形式；例如write(name),更好的就是writeField(name)知道要写的name是一个field；

可以向函数名中添加一些关键字（例如参数的名称）：assertEqual => assertExpectedEqualsActual(expected,actual);这样还可以减轻记忆参数顺序的负担；
